name: Real-time Auto Deployment (Self-hosted)

on:
  push:
    branches:
      - develop

jobs:
  deploy:
    runs-on: self-hosted
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Deploy to Docker Compose
        run: |
          docker-compose up -d --build ai-media-service mongo shorts-controller shorts-log-service frontend-server tailscale zookeeper kafka
          docker image prune -f
